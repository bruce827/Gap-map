# Gap-map 产品简报

> **产品口号**: 发现你的理想慢生活城市  
> **核心定位**: 以地图为中心的个人化城市信息聚合与可视化系统  
> **目标用户**: 追求工作生活平衡的职场人士、数字游民、远程工作者  
> **开发周期**: 10周（含移动端）

---

## 📋 执行摘要

### 核心价值
帮助用户发现适合"慢生活"的理想城市，通过**多维度数据** + **真实社交评价** + **地图可视化**，提供一站式城市决策支持。

### 关键差异化
1. ✅ **地图中心设计** - 交互式地图，直观对比
2. ✅ **可扩展动态数据** - 天气、新闻等动态数据在 Phase 2 接入
3. ✅ **社交评价** - 小红书、微博真实用户反馈
4. ✅ **移动端完整体验** - PWA + 小程序，支持离线
5. ✅ **AI爬虫创新** - 截图识别，对抗反爬

---

## 核心功能矩阵

| 功能模块 | 子功能 | 优先级 | 技术方案 |
|----------|--------|--------|----------|
| **地图可视化** | 交互式地图、城市标记 | P0 | 高德地图JS API |
| **城市信息** | 房产、医疗、气候、生活、交通、经济 | P0 | 多数据源整合 |
| **动态数据（Phase 2）** | 天气、新闻 | P2 | 和风天气API + 爬虫 |
| **社交评价** | 小红书、微博、知乎 | P1 | Playwright + AI识别 |
| **城市对比** | 雷达图、表格 | P1 | Chart.js |
| **移动端** | PWA、小程序、原生功能 | P1 | SvelteKit PWA + uni-app |

说明：MVP 阶段不提供“综合总分/综合排名”，仅展示分维度指标并支持按单指标筛选/排序；综合指数/排名在 Phase 2 迭代。

---

## 技术架构决策

### 核心技术栈
```
前端框架: SvelteKit 2.0 (编译时框架，性能最优)
地图: 高德地图 JS API 2.0
UI库: Flowbite Svelte + TailwindCSS
图表: Chart.js / ECharts
后端: SvelteKit API Routes (内置)
数据库: Prisma + SQLite(开发) / PostgreSQL(生产)
爬虫: Playwright + Claude/GPT-4 Vision
部署: Vercel + Supabase
```

### 移动端方案
- **PWA**: Service Worker + Web App Manifest，支持离线
- **小程序**: uni-app框架，一次开发多端发布
- **响应式**: TailwindCSS断点系统，适配手机/平板
- **原生功能**: GPS定位、相机、分享API

---

## 📊 开发路线图 (10周)

```
周数    阶段        核心任务                        验收标准
─────────────────────────────────────────────────────────────────
1-2     Phase 1-2   SvelteKit基础 + 后台管理        地图显示 + 数据管理
3-4     Phase 3-4   Playwright爬虫 + 数据完善       房价/POI数据
5-6     Phase 5     AI识别爬虫（小红书/微博）       社交评价准确率>85%
7-8     Phase 6     城市对比 + 可视化               雷达图 + 筛选排序
9-10    Phase 7     移动端PWA + 小程序              可安装 + 审核上线
```

**关键里程碑**:
- 第4周: 完成核心数据爬取，50+城市数据
- 第6周: AI爬虫稳定运行，社交评价上线
- 第8周: 城市对比功能完成，性能优化
- 第10周: 移动端PWA可安装，小程序上线

---

## ✅ MVP范围与验收标准

**MVP范围 (Phase 1-2):**
- 地图浏览与城市点位展示（缩放/拖拽/搜索）
- 城市详情：展示基础信息与分维度指标（不做综合总分/综合排名）
- 城市对比：支持2-4个城市分维度对比
- 筛选与排序：按条件筛选 + 按单指标排序
- 数据管理：支持以管理入口/脚本方式更新城市数据（增删改查）

**明确不做 (MVP不包含):**
- 动态数据：天气/新闻（Phase 2，非MVP）
- 综合躺平指数/排名（Phase 2，非MVP）

**MVP验收标准:**
- 地图可正常加载并展示不少于5-10个测试城市点位
- 点击城市点位可打开详情卡片/页面，并展示关键分维度字段
- 支持筛选（至少3个条件）与排序（至少2个单指标）且结果正确
- 支持城市对比（至少2城）且对比维度清晰
- 数据更新后前台可读取到最新数据

---

## 📈 成功指标

### 数据指标
- 城市覆盖率: 50+ (首月) → 200+ (第3月)
- 数据完整度: >90%
- 更新成功率: >95%

### 性能指标
- 首屏加载: <2秒 (4G网络)
- 交互延迟: <100ms
- Lighthouse评分: >90

### 用户指标
- 信息查询效率提升: 80%+
- 移动端使用占比: >60%
- PWA安装率: >30%
- 小程序日活: 50+ (首月)

---

## ⚠️ 关键风险

### 数据风险
- **API限流**: 多API备用 + 请求频率控制
- **爬虫被封**: 低频访问 + 代理池 + AI识别
- **数据源失效**: 定期检查 + 替代方案

### 移动端风险
- **PWA兼容性**: 充分测试 + fallback方案
- **小程序审核**: 遵守规范 + 申诉准备
- **性能问题**: 持续profiling + 图片压缩

---

## 🚀 立即行动

**本周任务 (Phase 1)**:
1. ✅ 初始化SvelteKit项目
2. ⏳ 配置TailwindCSS + Skeleton UI
3. ⏳ 注册高德地图API Key
4. ⏳ 创建地图组件，显示5-10个测试城市

 **待注册账号**:
 - [ ] 高德开放平台 (地图API)
 - [ ] 和风天气 (天气API，Phase 2)
 - [ ] Claude API (AI识别)
 - [ ] Vercel (部署)
 - [ ] Supabase (数据库)

---

## 📚 相关文档

| 文档 | 用途 | 状态 |
|------|------|------|
| [完整PRD](./tangping_city_prd.md) | 详细需求、技术方案、开发计划 | ✅ 已更新 |
| [技术评估](./反卷躺平系统PRD.md) | 技术选型对比、架构设计 | ✅ 参考文档 |
| [数据设计](./data_structure_design.md) | 数据库Schema、API设计 | ✅ 已确认 |

---

**文档信息**
- 版本: v1.0 (2025-12-23)
- 创建者: Mary (商业分析师) + PM Agent
- 审核状态: 已审核 ✅
- 下一评审: Phase 1完成后 (预计2025-12-30)